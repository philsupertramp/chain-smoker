type: 'api-test'

config:
  client:
    base_url: 'https://www.postman-echo.com/'

tests:
  reuse_post_payload_in_following_request:
    multi_step: true
    steps:
      - name: 'get_token'
        is_authentication: true
        endpoint: 'post/'
        method: 'post'
        payload: '{"token": "Some Strange Token"}'
        auth_header_template:
          token_position: "res.json().get('data').get('token')"
          auth_header:
            Authorization: "JWT {token}"
      - name: 'get-with-header'
        endpoint: 'get/'
        method: 'get'
        contains:
          headers:
            authorization: "JWT Some Strange Token"